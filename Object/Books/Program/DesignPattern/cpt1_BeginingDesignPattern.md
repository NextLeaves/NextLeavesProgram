---

title: cpt 1 Begining Design Pattern
date: 2/27/2018 2:22:43 PM 
tags:
- designpattern
- csharp
categories: designpattern
thumbnail: https://i.imgur.com/WiBfKkJ.jpg

---

# 第一章 设计模式入门 #

* Wrote : 2/27/2018 2:22:43 PM 
* Name  : NextLeaves

* 模拟鸭的案例（策略模式（Strategy Pattern））
* 附近餐厅的故事

---

## 1. 模拟鸭的案例 ##

### 1.1 初始鸭子 ###

* 设计一个超类（SuperClass），能够实现Quack()，Swim()，Display()
* 子类为不同种类的鸭子

### 1.2 扩展功能Fly() ###

* 错误方式：使用**继承**的方式，达到代码复用；但是不能飞行的子类也具有飞行的功能
* **继承的问题**所在：
	* 达到复用效果，但是子类不应该具有的，也得到的继承；若覆盖所继承的方法，那么在维护阶段会导致大量的任务

* 利用接口来达到部分实现功能
* **接口的问题**所在：
	* 代码重复性增加，增加了代码维护性，这样每一个对象都需要实现接口函数代码

* **软件开发一个不变的真理：**	CHANGE

### 1.3 设计模式一 ###

* 找出应用程序中可能会发生变化的代码，把他们独立出来，和不需要变化的部分分离开来（把变化的部分**封装**起来，不变化的分离开来**封装**）
* **针对接口编程，而不是针对实现编程**
* **多组合，少继承**

### 1.4 设计鸭子的行为 ###

* 独立出Fly和Quack行为，设计FlyBehavior和QuackBehavior接口
* 针对接口编程，实际上是针对超类型编程，如下代码所示：

`

	//针对实现编程
	Dog dog=new Dog();
	dog.Bark();

	//针对接口编程
	Animal anim=new Dog();
	anim.MakeSound();

### 1.5 实现鸭子行为 ###

* FlyBehavior接口，其下继承
	* FlyWithWings
	* FlyNoway
* QuackBehavior接口，其下继承
	* Quack
	* Squeak
	* MuteQuack

### 1.6 NO DUMB QUEATION ###

* 1. 是不是先做出系统，然后再发现问题，再从中找出变化的部分，将其隔离，封装？
* 2. Duck是不是也应该设计成一个接口？
* 3. 用一个类作为一个行为，觉得有些奇怪，不是类应该具有属性，应该是一种“东西”吗？，行为吗？

### 1.7 整合鸭子的行为 ###

* 将具体的类，在Duck中中添加对象变量，达到调用响应的实现
* 在构造函数中，初始化变量；这样也是针对实现编程，但是仍然具有弹性，因为可以动态改变变量的类型，后续会增加更多的技巧来优化

### 1.8 动态设定行为 ###

* 在Duck类中设置可以更换行为的函数；现在行为的弹性操作，可以实现运行时改变

### 1.9 封装行为的大局观 ###

* 一组行为，一簇算法
* IS-A, HAS-A，IMPLEMENTS

## 2. 总结优点 ##

### 2.1 HAS-A可能比IS-A更好 ###

* 言外之意就是：组合（composition）的魅力
* 使用设计模式，可以降低后期的**维护性**和**弹性**

### 2.2 策略模式定义 ###

* 定义了算法簇，分别封装起来，他们之间可以互相替换；此模式让算法的变化独立于所使用算法的客户。

## 3. 其他扩展内容 ##

### 3.1 附近餐厅的故事 ###

* 共享词语，能够提高工作人员之间的交流
* 办公室的故事
* 扩展其他的故事，能够使用共享词汇的地方

### 3.2 共享词汇的威力 ###

* 词汇背后所具有的的内容
* 充分你的沟通
* 保持在模式的层次上面
* 为开发团队快速充电
* 帮助初级程序员快速成长

### 3.3 如何使用设计模式 ###

* API只是功能的实现，我们所学的是用在逻辑上层的架构

### 3.4 NO DUMB QUEATIONS ###

* 1. 如果设计模式这么棒，为什么没有响应的库或者模版？
* 2. 库和框架不也是设计模式吗？
* 3. 那么，没有所谓的设计模式的库？

### 3.5 怀疑的开发人员 ###

* 针对于设计模式，其实就是运用了OO原则。
* 但是其是凌驾于OO原则之上，只有通过艰苦的训练，才会领悟其正在的含义，运用在合适的地方

### 4. 设计工具箱内的工具 ###

* 1. 基础
	* 抽象
	* 封装
	* 多态
	* 继承
* 2. 原则
	* 封装变化的部分
	* 多用组合，少用继承
	* 针对接口编程，而不是实现编程
* 3. 模式
	* 策略模式-定义算法簇，将其封装，并且可以相互替换使用，此模式可以使变化独立于使用算法的客户。
* 4. 要点
	* 良好的OO设计需要具备：
		* 可复用性
		* 可扩充性
		* 可维护性
	* 模式不是被创造，而是被发现